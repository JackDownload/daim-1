language: node_js
#  latest stable Node.js release
node_js: lts/*
addons:
  chrome: stable # make Chrome available
# Cache node packages between jobs
cache: npm

script:
  - npm run lint
  # - npm run test
  - npm run build:export
  - npx semantic-release

deploy:
  - provider: surge
    domain: daim.dev
    project: ./dist
    # edge: true # opt in to dpl v2
    skip_cleanup: true
    on:
      branch: master

  - provider: surge
    domain: staging.daim.dev
    project: ./dist
    # edge: true # opt in to dpl v2
    skip_cleanup: true
    on:
      all_branches: true

  - provider: firebase
    skip_cleanup: true
    project: default
    token:
      secure: mjxFti6SckWNRur7BJNNU1vaCjSoELLLdkTnJ30dvQPwXwx6Aa4TeJAK6J0sNyRw8BJeuC3+A7bUS/2eAKoHj/Ne7nICdEizW6CCf08/dKpxHDrlFThN6/bq7acRLqu2eDV4S7wmx7BsXkNHNfrPDdnqR73pvoXxh5l/KIdw0nfNryV9vP7ZhnNzYQo02KUBJdgo8nYKpQ1tGIudvpMocIOHiuyNK0C9rR7PbfiOTSk6pWSm2Iog1mr271zRWnhx9QrjxuxZ7BQHcBMyMyXLOsI6xPTgw4Mvv1IrAv2TavWYaQRQK2JpjZm3rhTbG+QHhxMqWix+8RMCJ4NacLIN6lgj5v0c316a/Ttirg4EvU49cJytKtyWkZe/VwGbimIywXOkkouj/iZiYvMQd0dBU2e1Y1rPHiNA3qCb30eEGmCprX+xA7ivcc+UXH5tUtujsDxjLBVeIjwgYO6L6hIoh0Wp4h3X27JSX598mDpftzBPvneOAAl8+pXLXTiVYHH7QNixjSc0eme9vVnFQOZFRAxTYnpMpbwLnxDajo1fmXNyu6co0+cN81jYafBxzf3R3ZoVEUUebTnlc1oYXUXXntJrSJBk3C4OWswRdUs0/86hwIUHK2LYOfmZM3XrKEC8VSdPQQ6PX0OT94dlwLTwKpDDZwZiLAsxaPX1Oj+/Ruw=
    on:
      branch: master

after_success:
  - npm run lhci:autorun

env:
  global:
    secure: mjxFti6SckWNRur7BJNNU1vaCjSoELLLdkTnJ30dvQPwXwx6Aa4TeJAK6J0sNyRw8BJeuC3+A7bUS/2eAKoHj/Ne7nICdEizW6CCf08/dKpxHDrlFThN6/bq7acRLqu2eDV4S7wmx7BsXkNHNfrPDdnqR73pvoXxh5l/KIdw0nfNryV9vP7ZhnNzYQo02KUBJdgo8nYKpQ1tGIudvpMocIOHiuyNK0C9rR7PbfiOTSk6pWSm2Iog1mr271zRWnhx9QrjxuxZ7BQHcBMyMyXLOsI6xPTgw4Mvv1IrAv2TavWYaQRQK2JpjZm3rhTbG+QHhxMqWix+8RMCJ4NacLIN6lgj5v0c316a/Ttirg4EvU49cJytKtyWkZe/VwGbimIywXOkkouj/iZiYvMQd0dBU2e1Y1rPHiNA3qCb30eEGmCprX+xA7ivcc+UXH5tUtujsDxjLBVeIjwgYO6L6hIoh0Wp4h3X27JSX598mDpftzBPvneOAAl8+pXLXTiVYHH7QNixjSc0eme9vVnFQOZFRAxTYnpMpbwLnxDajo1fmXNyu6co0+cN81jYafBxzf3R3ZoVEUUebTnlc1oYXUXXntJrSJBk3C4OWswRdUs0/86hwIUHK2LYOfmZM3XrKEC8VSdPQQ6PX0OT94dlwLTwKpDDZwZiLAsxaPX1Oj+/Ruw=
